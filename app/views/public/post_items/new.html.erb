<div class="container">
  <div class="row">
    
    <%= form_with model: @post_item, local: true do |f| %>
      <ul class="">
        <%= f.label :item_name, "商品名" %>
        <%= f.text_field :item_name %>
      </ul>
      <ul class="">
        <%= f.label :review, "レビュー" %>
        <%= f.text_area :review %>
      </ul>
      <ul class="">
        <%= f.label :price, "価格" %>
        <%= f.text_field :price %>
      </ul>
      
      <div class="star-form-group" id="star">
        <%= f.label :evaluation, "評価", class: "star-title" %>
        <!-- 入力方法を変更する-->
        <%= f.hidden_field :evaluation, id: :review_star %>
        <!--< %= f.text_field :evaluation %>-->
      </div>
      <script>
        $('#star').empty();
        $('#star').raty({
          size: 36,
          starOff: '<%= asset_path('star-off.png') %>',
          starOn: '<%= asset_path('star-on.png') %>',
          starHalf: '<%= asset_path('star-half.png') %>',
          scoreName: 'post_item[evaluation]',
          half: true,
        })
      </script>
      
      
      <div class="">
        <%= f.label :item_URL, "URL" %>
        <%= f.text_field :item_URL %>
      </div>
      
      <div class="">
        スペースを入力することで複数のタグを付けることができます。
        <%= f.text_field :tag_name %>
      </div>
      
      <!--<div class="form-group">-->
      <!--  < %= f.collection_check_boxes(:tag_ids, Tag.all, :id, :tag_name) do |tag| %>-->
      <!--    <div class="form-check">-->
      <!--      < %= tag.label class: "form-check-label" do %>-->
      <!--        < %= tag.check_box class: "form-check-input" %>-->
      <!--        < %= tag.text %>-->
      <!--      < % end %>-->
      <!--    </div>-->
      <!--  < % end %>-->
      <!--</div>-->
      
      <%= fields_for @shop do |shop| %>
        <div class="">
          <%= shop.label :shop_name, "店名" %>
          <%= shop.text_field :shop_name %>
        </div>
        <div class="">
          <%= shop.label :address, "住所" %>
          <%= shop.text_field :address %>
        </div>
        <div class="">
          <%= shop.label :telephone_number, "電話番号" %>
          <%= shop.text_field :telephone_number %>
        </div>
        <div class="">
          <%= shop.label :shop_URL, "ホームページ" %>
          <%= shop.text_field :shop_URL %>
        </div>
        <div class="">
          <%= shop.label :email, "メールアドレス" %>
          <%= shop.text_field :email %>
        </div>
      <% end %>
      
      
      
      <%= f.submit "投稿する", :name => 'post', class: "btn btn-success" %>
      <%= f.submit "下書きに保存", :name => 'draft', class: "btn btn-secondary" %>
    <% end %>
  </div>
</div>

<%= form_with model: @tag, url: tags_path, method: :post do |tag| %>
  <%= tag.text_field :tag_name %>
  <%= tag.submit "タグ追加", class: "btn btn-primary" %>
<% end %>

タグリスト
<% @tag_list.each do |list| %>
  <%= link_to list.tag_name, tag_post_items_path(tag_id: list.id) %>
  <%= "(#{list.post_items.count})" %>
<% end %>